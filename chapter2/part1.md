# Главные конструкции C# (Часть 1)

## Метод Main()

Метод ``Main`` — это точка входа приложения C#. В программе на C# может существовать только одна точка входа. Метод ``Main`` должен быть помечен ключевым словом ``static``.

При запуске приложения, первым вызывается метод ``Main``. Если в проекте несколько классов с методом ``Main``, программу нужно компилировать с параметром компилятора StartupObject, чтобы указать, какой из методов ``Main`` будет использоваться в качестве точки входа. 

Точку входа можно создавать с любой из сигнатур
```csharp
static void Main() { }
static int Main() { }
static void Main(string[] args) { }
static int Main(string[] args) { }
```

### Асинхронный метод Main() [C# 7.1]

Метод ``Main`` также может быть асинхронным 
```csharp
static async Task Main() { }
static async Taskint Main() { }
static async Task Main(string[] args) { }
static async Taskint Main(string[] args) { }
```

### Операторы верхнего уровня [C# 9.0]

Точку входа можно задать неявно с помощью операторов верхнего уровня
```csharp
using System;
Console.WriteLine(Hello, World!);
```
Этот код аналогичен предыдущему:
```csharp
using System;
namespace Application
{
    class Program
    {
        static void Main()
        {
            Console.WriteLine(Hello World!);
        }
    }
}
```
Существует ряд правил использования операторов верхнего уровня:
* Проект может содержать только один файл с операторами верхнего уровня. В проекте с операторами верхнего уровня нельзя использовать параметр компилятора ``-main`` для выбора точки входа, в случае использования нескольких методов Main.
* Директивы ``using`` должны быть записаны до операторов верхнего уровня.
* Операторы верхнего уровня неявно находятся в глобальном пространстве имен.
* Операторы верхнего уровня должны быть записаны до объявлений пространств имен, типов, функций.
* Операторы верхнего уровня могут ссылаться на переменную ``args``

### Аргументы командной строки
Для того чтобы получить аргументы командной строки достаточно определить метод ``Main`` следующим образом:
```csharp
static void Main(string[] args)
{
    ...
}
```
Аргумент ``args`` представляет собой строковый массив.

Другим подходом к получению аргументов командной строки является метод ``GetCommandLineArgs()`` типа ``System.Environment``, который работает с любой сигнатурой метода ``Main``.

## Форматирование

### Форматирование консольного вывода

Платформа .NET представляет возможность указать заполнители консольного вывода:
```csharp
Console.WriteLine("Hello, {1}, {0}{2}{2}", "how are you", "man", "?");
```
Порядковые числа заполнителей всегда начинаются с 0. Заполнители могут располагаться в любом порядке и любое количество раз.

В случае, если уникальных заполнителей больше, чем заполняющих аргументов, то будет выдано исключение. Если меньше - заполняющие аргументы игнорируются.

### Форматирование числовых данных

Для численных данных определены различные символы форматирвания:
Символ | Пример | Описание
--- | --- | ---
"C" или "c" | 500.5 -> $500.5 | Валюта (зависит от культуры)
"D" или "d" | 499 -> 00499 | Минимальное количество разрядов для представления десятичного числа
"E" или "e" | 1052.0329112756 -> 1.052033E+003 | Экспоненциальное представление десятичного числа
"F" или "f" | 1234.567 -> 1234.57 | Представление числа с фиксированной точкой (зависит от культуры)
"G" или "g" | -1.234567890e-25 -> 1,23456789E-25 | Совмещает "E" и "F" (зависит от культуры)
"N" или "n" | 1234.567 -> 1 234 57 | Базовое числовое форматирование (зависит от культуры)
"P" или "p" | 1 -> 100 % | Число, умноженное на 100, с символом % (зависит от культуры)
"R" или "r" | 1234.1234 -> 1234.1234 | Строка, дающая при обратном преобразовании идентичное число
"X" или "x" | 255 -> FF | Шестнадцатеричное число

Символы форматирования можно использовать следующим образом:
```csharp
Console.WriteLine("Сurrency {0:C}, Percentages {1:P}", cur, per);
```

### Форматирование строкового литерала

Для форматирования строки можно воспользоваться статическим методом ``string.Format()``:
```csharp
string str = string.Format("Give me {0:C} now!", 100);
```

## Системные типы данных

В языке C# представлены различные фундаментальные типы данных, которые представлены ниже. 
В таблице так же указана совместимость с CLS и полное имя каждого типа данных.
Тип данных | Совместимость CLS | Полное имя | Диапозон значений | Описание
--- | --- | --- | --- | ---
``bool`` | + | ``System.Boolean`` | ``true`` или ``false`` | Истина или ложь
``sbyte`` | - | ``System.SByte`` | От -128 до 127 | 1 байт, со знаком
``byte`` | + | ``System.Byte`` | От 0 до 255 | 1 байт, без знака
``short`` | + | ``System.Int16`` | От -32768 до 32767 | 2 байта, со знаком
``ushort`` | - | ``System.UInt16`` | От 0 до 65535 | 2 байта, без знака
``int`` | + | ``System.Int32`` | От -2147483648 до 2147483647 | 4 байта, со знаком
``uint`` | - | ``System.UInt32`` | От 0 до 4294967295 | 4 байта, без знака
``long`` | + | ``System.Int64`` | От $-2^{63}$ до $2^{63}-1$ | 8 байт, со знаком
``ulong`` | - | ``System.UInt64`` | От 0 до $2^{64}-1$ | 8 байт, без знака
``char`` | + | ``System.Char`` | От U+0000 до U+ffff | 2 байта, символ Unicode
``float`` | + | ``System.Single`` | От $-3.4 * 10^{38}$ до $3.4 * 10^{38}$ | 4 байта, с плавающей точкой
``double`` | + | ``System.Double`` | От $\pm5.0 * 10^{-324}$ до $\pm1.7 * 10^{308}$ | 8 байт, с плавающей точкой
``decimal`` | + | ``System.Decimal`` | От $\pm1.0 * 10^{-28}$ до $\pm7.9228 * 10^{28}$ | 16 байт, 28 знаков после запятой
``string`` | + | ``System.String`` | $\inf$ | Набор символов Unicode
``object`` | + | ``System.Object`` | Любой тип | Базовый класс
